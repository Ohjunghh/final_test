<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>회원가입 환영 템플릿 개인화 입력폼</title>
  <link href="https://fonts.googleapis.com/css?family=Pretendard:400,700&display=swap" rel="stylesheet">
  <style>
    html, body { height: 100%; }
    body {
      font-family: 'Pretendard', Arial, sans-serif;
      background: #fafafa;
      margin: 0;
      padding: 0;
      height: 100%;
    }
    .main-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 48px;
      min-height: 100vh;
      width: 100vw;
      box-sizing: border-box;
    }
    .personalize-form {
      width: 410px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 8px #eee;
      padding: 32px 32px 24px 32px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      min-width: 300px;
      max-width: 410px;
    }
    .personalize-form .row,
    .personalize-form .benefit-row {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 0;
    }
    .personalize-form label {
      width: 120px;
      min-width: 120px;
      max-width: 120px;
      font-size: 14px;
      color: #333;
      margin: 0;
      font-weight: 500;
      display: inline-block;
      font-family: inherit;
    }
    .personalize-form input[type="text"],
    .personalize-form input[type="number"] {
      width: 220px;
      padding: 6px 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 15px;
      background: #fafbfc;
      font-family: inherit;
      margin-bottom: 0;
    }
    .personalize-form input[type="text"]:focus,
    .personalize-form input[type="number"]:focus {
      border: 1.5px solid #4e8cff;
      outline: none;
      background: #fff;
    }
    .benefit-row input[type="checkbox"] {
      width: 20px;
      height: 20px;
      margin-left: 8px;
    }
    .personalize-form button {
      margin-top: 18px;
      padding: 10px 0;
      background: #4e8cff;
      color: #fff;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.2s;
      font-family: inherit;
    }
    .personalize-form button:hover {
      background: #2563eb;
    }
    .download-btn {
      background: #10b981;
      padding: 10px 0;
      margin-top: 10px;
      transition: background 0.2s;
    }
    .download-btn:hover {
      background: #059669;
    }
    .welcome-container {
      width: 600px;
      max-width: 96vw;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 8px #eee;
      margin: 0 auto;
      padding: 0 0 40px 0;
      font-family: 'Pretendard', Arial, sans-serif;
    }
    .welcome-illustration {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 32px 0 0 0;
      padding-top : 15px;
    }
    .welcome-illustration img {
      width: 100px;
      height: auto;
      display: block;
    }
    .welcome-title {
      font-size: 30px;
      font-weight: 700;
      color: #222;
      text-align: center;
      margin: 32px 0 0 0;
    }
    .welcome-message {
      font-size: 18px;
      color: #333;
      text-align: center;
      margin: 24px 0 0 0;
      line-height: 1.6;
    }
    .welcome-benefit {
      font-size: 16px;
      color: #e74c3c;
      text-align: center;
      margin: 20px 0 0 0;
      font-weight: 600;
    }
    .login-box {
      background: #f5f6fa;
      border-radius: 8px;
      width: 220px;
      margin: 32px auto 0 auto;
      padding: 14px 0;
      text-align: center;
      font-size: 18px;
      color: #222;
    }
    .login-label {
      color: #888;
      font-size: 15px;
      margin-right: 8px;
    }
    .footer-info {
        width: 100%;
        max-width: 600px;
        margin: 24px auto 0 auto;
        text-align: center;
        color: #333333;
        font-size: 12px;
        font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
        line-height: 18px;
        letter-spacing: 0;
    }
    .footer-info p {
        margin: 0;
        padding: 0;
    }


    .cta-btn {
      display: block;
      width: 220px;
      margin: 32px auto 0 auto;
      background: #5c68e2;
      color: #fff;
      font-size: 15px;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      padding: 18px 0;
      text-align: center;
      text-decoration: none;
    }
    .contact-info {
      text-align: left;
      color: #666;
      font-size: 14px;
      margin: 36px 0 0 0;
      line-height: 1.8;
      padding-left: 28px;
    }
    .contact-info a {
      color: #5c68e2;
      text-decoration: underline;
    }
    @media (max-width: 1100px) {
      .main-container { flex-direction: column; align-items: center; gap: 30px; min-height: unset; }
      .welcome-container { width:98% !important; }
      .personalize-form { width:98% !important; }
    }
  </style>
</head>
<body>
  <div class="main-container">
    <form class="personalize-form" id="personalizeForm" onsubmit="event.preventDefault();applyPersonalization();">
      <div class="row"><label>고객명</label><input type="text" id="customerName" value="김철수"></div>
      <div class="row"><label>회사명</label><input type="text" id="companyName" value="런쇼핑몰 주식회사"></div>
      <div class="row benefit-row"><label for="benefitText">특별혜택(1줄)</label><input type="text" id="benefitText" value="신규회원 특별혜택: 20% 할인쿠폰 (WELCOME20) + 3,000P 적립!"> <input type="checkbox" id="showBenefit" checked></div>
      <div class="row"><label>로그인 아이디</label><input type="text" id="loginId" value="runuser2024"></div>
      <div class="row"><label>쇼핑버튼 텍스트</label><input type="text" id="shopNowButton" value="지금 쇼핑하기"></div>
      <div class="row"><label>웹사이트 URL</label><input type="text" id="websiteUrl" value="https://www.runshop.co.kr"></div>
      <div class="row"><label>고객센터 이메일</label><input type="text" id="supportEmail" value="support@runshop.co.kr"></div>
      <div class="row"><label>고객센터 전화</label><input type="text" id="supportPhone" value="1588-1234"></div>
      <div class="row"><label>회사주소</label><input type="text" id="companyAddress" value="서울특별시 강남구 테헤란로 123, 런닝타워 10층, 06234"></div>
      <div class="row"><label>회사설립연도</label><input type="text" id="companyYear" value="2024"></div>
      <div class="row" style="text-align:right;">
        <button type="button" onclick="applyPersonalization()">미리보기</button>
        <button type="button" class="download-btn" onclick="downloadHtml()">HTML 다운로드</button>
      </div>
    </form>
    <div id="preview-area"></div>
  </div>

  <script>
    const template = `
        <div class="welcome-container">
            <div class="welcome-illustration">
            <img id="welcomeIllust" style="padding:0;Margin:0;padding-top:10px;padding-bottom:10px;font-size:0px" width="100" src="https://fveetos.stripocdn.email/content/guids/CABINET_f3fc38cf551f5b08f70308b6252772b8/images/96671618383886503.png" alt="회원가입 일러스트">
            </div>
            <div class="welcome-title" id="mainTitle">[고객명]님, 환영합니다!</div>
            <div class="welcome-message" id="welcomeMessage">
            안녕하세요, [고객명]님! [회사명]에 가입해주셔서 감사합니다!<br>
            이제 최신 컬렉션과 특별 혜택을 가장 먼저 만나보실 수 있습니다!
            </div>
            <div class="welcome-benefit" id="benefitBlock">
            🎉 [특별혜택]
            </div>
            <div class="login-box">
            <span class="login-label">아이디:</span>
            <span id="loginIdField">[로그인아이디]</span>
            </div>
            <a href="[웹사이트URL]" target="_blank" class="cta-btn" id="shopNowButton">[쇼핑버튼]</a>
            <div class="contact-info" id="contactInfo">
            궁금한 점이 있으시면 <a target="_blank" href="mailto:[고객센터이메일]">[고객센터이메일]</a>로 메일을 보내시거나 <a target="_blank" href="tel:[고객센터전화]">[고객센터전화]</a>로 전화주세요.<br>
            <span id="teamName">[회사명] 팀</span>
            </div>
        </div>
        <footer class="footer-info">
            <p class="copyright">[회사명] © [회사설립연도] [회사명]. All Rights Reserved.</p>
            <p class="address">[회사주소]</p>
        </footer>
        `;

    let lastHtml = "";

    function applyPersonalization() {
      const get = id => document.getElementById(id).value.trim();

      let html = template
        .replace(/\[고객명\]/g, get('customerName'))
        .replace(/\[회사명\]/g, get('companyName'))
        .replace('[특별혜택]', get('benefitText'))
        .replace('[로그인아이디]', get('loginId'))
        .replace('[쇼핑버튼]', get('shopNowButton'))
        .replace('[웹사이트URL]', get('websiteUrl'))
        .replace(/\[고객센터이메일\]/g, get('supportEmail'))
        .replace(/\[고객센터전화\]/g, get('supportPhone'))
        .replace(/\[회사설립연도\]/g, get('companyYear'))
        .replace(/\[회사주소\]/g, get('companyAddress'));

      // 특별혜택 표시/숨김
      if(!document.getElementById('showBenefit').checked || !get('benefitText')) {
        // benefitBlock 숨김
        html = html.replace(
          /<div class="welcome-benefit" id="benefitBlock">[\s\S]*?<\/div>/,
          ''
        );
      }

      lastHtml = html;

      document.getElementById('preview-area').innerHTML =
        '<div class="section"><b>미리보기</b>' + html + '</div>';
    }

    function downloadHtml() {
      // 전체 HTML 문서로 감싸서 다운로드
        const doc = `
    <!DOCTYPE html>
    <html lang="ko">
    <head>
    <meta charset="UTF-8">
    <title>회원가입 환영 템플릿</title>
    <link href="https://fonts.googleapis.com/css?family=Pretendard:400,700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Pretendard', Arial, sans-serif; background:#fafafa; }
        .welcome-container {
        width: 650px;
        max-width: 96vw;
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 2px 8px #eee;
        margin: 40px auto 0 auto;
        padding: 0 0 40px 0;
        font-family: 'Pretendard', Arial, sans-serif;
        }
        .welcome-illustration {
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 32px 0 0 0;
        padding-top : 15px;
        }
        .welcome-illustration img {
        width: 100px;
        height: auto;
        display: block;
        }
        .welcome-title {
        font-size: 30px;
        font-weight: 700;
        color: #222;
        text-align: center;
        margin: 32px 0 0 0;
        }
        .welcome-message {
        font-size: 18px;
        color: #333;
        text-align: center;
        margin: 24px 0 0 0;
        line-height: 1.6;
        }
        .welcome-benefit {
        font-size: 16px;
        color: #e74c3c;
        text-align: center;
        margin: 20px 0 0 0;
        font-weight: 600;
        }
        .login-box {
        background: #f5f6fa;
        border-radius: 8px;
        width: 220px;
        margin: 32px auto 0 auto;
        padding: 14px 0;
        text-align: center;
        font-size: 18px;
        color: #222;
        }
        .login-label {
        color: #888;
        font-size: 15px;
        margin-right: 8px;
        }
        .cta-btn {
        display: block;
        width: 260px;
        margin: 32px auto 0 auto;
        background: #5c68e2;
        color: #fff;
        font-size: 22px;
        font-weight: 600;
        border: none;
        border-radius: 8px;
        padding: 18px 0;
        text-align: center;
        text-decoration: none;
        }
        .contact-info {
        text-align: left;
        color: #666;
        font-size: 14px;
        margin: 36px 0 0 0;
        line-height: 1.8;
        padding-left: 28px;
        }
        .contact-info a {
        color: #5c68e2;
        text-decoration: underline;
        }
        .footer-info {
        width: 100%;
        max-width: 650px;
        margin: 24px auto 0 auto;
        text-align: center;
        color: #333333;
        font-size: 12px;
        font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
        line-height: 18px;
        letter-spacing: 0;
        }
        .footer-info p {
        margin: 0;
        padding: 0;
        }
    </style>
    </head>
    <body>
    ${lastHtml}
    </body>
    </html>
        `.trim();

        const blob = new Blob([doc], {type: "text/html"});
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = "welcome_template.html";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        }

        // 최초 미리보기
        window.onload = applyPersonalization;
    </script>
    </body>
    </html>
