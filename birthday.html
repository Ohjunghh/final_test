<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>생일 축하 템플릿 개인화 입력폼</title>
  <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i" rel="stylesheet">
  <style>
    html, body { height: 100%; }
    body { font-family: 'Lora', Georgia, 'Times New Roman', serif; background:#f6f6f6; margin:0; padding:0; height:100%; }
    h2 { text-align:center; margin-top:40px; font-family: inherit;}
    .container-flex {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 40px;
      min-height: 100vh;
      width: 100vw;
      box-sizing: border-box;
    }
    form#personalize-form {
      width: 410px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 8px #eee;
      padding: 32px 32px 24px 32px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      min-width: 300px;
      max-width: 410px;
    }
    .form-row {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 0;
    }
    .form-row label {
      width: 110px;
      min-width: 110px;
      max-width: 110px;
      font-size: 15px;
      color: #444;
      margin: 0;
      font-weight: 500;
      display: inline-block;
      font-family: inherit;
    }
    input[type="text"], input[type="number"], select {
      width: 150px;
      padding: 7px 10px;
      font-size: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background: #fafbfc;
      transition: border 0.2s;
      font-family: inherit;
    }
    input[type="text"]:focus, input[type="number"]:focus, select:focus {
      border: 1.5px solid #4e8cff;
      outline: none;
      background: #fff;
    }
    button {
      margin-top: 18px;
      padding: 10px 0;
      background: #4e8cff;
      color: #fff;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.2s;
      font-family: inherit;
    }
    button:hover {
      background: #2563eb;
    }
    .download-btn {
      background: #10b981;
      margin-top: 10px;
      transition: background 0.2s;
    }
    .download-btn:hover {
      background: #059669;
    }
    #result { margin-top:0; }
    .preview-container {
      background:#fff;
      border-radius:10px;
      box-shadow:0 2px 8px #eee;
      width:600px;
      margin:0 auto;
      font-family: 'Lora', Georgia, 'Times New Roman', serif;
    }
    .es-header-row {
      display: flex;
      align-items: center;
      padding: 15px 20px 15px 20px;
    }
    .es-header-left {
      color:#CCCCCC;
      font-size:14px;
      font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
    }
    .email-title {
      font-family:Lora,Georgia,'Times New Roman',serif;
      color:#666;
      font-size:40px;
      text-align:center;
      margin:36px 0 0 0;
      font-weight:normal;
    }
    .email-img { display:block; margin:28px auto 24px auto; }
    .email-body {
      color:#999999;
      font-size:14px;
      text-align:center;
      line-height:1.7;
      margin-bottom:20px;
      font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
    }
    .email-sign {
      color:#999;
      font-size:14px;
      text-align:center;
      font-style:italic;
      margin-bottom:36px;
      font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
    }
    .email-surprise {
      background:#c4dbf2;
      padding:36px 0 36px 0;
      text-align:center;
    }
    .email-surprise-title {
      color:#2f464b;
      font-size:24px;
      margin:0 0 12px 0;
      font-weight:normal;
      font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
    }
    .email-surprise-desc {
      color:#2f464b;
      font-size:20px;
      margin:0 0 18px 0;
      font-weight:normal;
      font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
    }
    .email-btn {
      display:inline-block;
      background:#fff;
      color:#2f464b;
      padding:10px 25px;
      border-radius:5px;
      text-decoration:none;
      font-size:18px;
      border:1px solid #ddd;
      margin-bottom:10px;
      font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
    }
    .email-footer {
      text-align:center;
      padding:32px 0 0 0;
      font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
    }
    .email-brand {
      font-size:24px;
      color:#222;
      font-weight:normal;
      letter-spacing:2px;
      margin-bottom:10px;
    }
    .email-copyright {
      color:#888;
      font-size:12px;
      margin-bottom:4px;
    }
    .email-unsub {
      color:#888;
      font-size:12px;
      text-decoration:underline;
    }
    .footer-spacer {
      height: 48px;
      background: transparent;
    }
    @media (max-width: 1100px) {
      .container-flex { flex-direction: column; align-items: center; gap: 30px; min-height: unset; }
      .preview-container, .section { width:98% !important; }
      form#personalize-form { width:98% !important; }
    }
  </style>
</head>
<body>
  <div class="container-flex">
    <form id="personalize-form">
      <div class="form-row">
        <label for="고객명">고객명</label>
        <input type="text" name="고객명" id="고객명" value="김철수" required>
      </div>
      <div class="form-row">
        <label for="쿠폰값">쿠폰/할인 혜택</label>
        <input type="number" name="쿠폰값" id="쿠폰값" value="20" min="1" required>
        <select name="쿠폰단위" id="쿠폰단위">
          <option value="%">%</option>
          <option value="Won">Won</option>
          <option value="Point">Point</option>
        </select>
      </div>
      <div class="form-row">
        <label for="쇼핑몰">쇼핑몰/샵 이름</label>
        <input type="text" name="쇼핑몰" id="쇼핑몰" value="RUN" required>
      </div>
      <div class="form-row">
        <label for="giftlink">Claim Gift 링크</label>
        <input type="text" name="giftlink" id="giftlink" value="https://yourshop.com/gift" placeholder="https://yourshop.com/gift" required>
      </div>
      <button type="button" onclick="makeHtml()">HTML 생성</button>
      <button type="button" class="download-btn" onclick="downloadHtml()">HTML 다운로드</button>
    </form>
    <div id="result"></div>
  </div>

  <script>
    // 템플릿 HTML (View in browser 제거, 하단 여백 추가)
    const template = `
      <div class="preview-container">
        <div class="es-header-row">
          <div class="es-header-left">TinkerBell</div>
        </div>
        <div style="background:#fff;">
          <div class="email-title"><em>Happy Birthday!</em></div>
          <img class="email-img" src="https://fveetos.stripocdn.email/content/guids/CABINET_b54797fc68edcecf4f6b2835e7bcba32/images/36321522405737710.gif" width="300" alt="Gift">
          <div style="padding:30px 40px 40px 40px;">
            <div class="email-body">
              [고객명]님, 생일을 진심으로 축하드립니다!<br>
              오늘 하루, 소중한 분과 행복한 시간 보내시길 바랍니다.<br>
              감사의 마음을 담아 [쿠폰혜택문구]을 선물로 드립니다.
            </div>
            <div class="email-sign">TinkerBell 배상</div>
          </div>
        </div>
        <div class="email-surprise">
          <div class="email-surprise-title">Surprise!</div>
          <div class="email-surprise-desc">
            For the next week you can get <span>[쿠폰하단]</span> off premium status.
          </div>
          <a href="[giftlink]" class="email-btn" target="_blank">Claim this Gift</a>
        </div>
        <div class="email-footer">
          
          <div class="email-brand">[쇼핑몰]</div>
          <div class="email-copyright">
            Copyright © 2028 TinkerBell, All rights reserved.<br>
            You are receiving this email because you have visited our site or asked us about regular newsletter.
          </div>
          <a href="#" class="email-unsub">Unsubscribe</a>
          <div class="footer-spacer"></div>
        </div>
      </div>
    `;

    let lastHtml = ""; // 다운로드용

    function makeHtml() {
      const form = document.getElementById('personalize-form');
      const name = form.elements['고객명'].value;
      const couponValue = form.elements['쿠폰값'].value;
      const couponUnit = form.elements['쿠폰단위'].value;
      const brand = form.elements['쇼핑몰'].value;
      let giftlink = form.elements['giftlink'].value.trim();

      // 본문 쿠폰 문구
      let couponText = '';
      if (couponUnit === '%') couponText = couponValue + '% 할인 쿠폰';
      else if (couponUnit === 'Won') couponText = couponValue + '원 할인 쿠폰';
      else if (couponUnit === 'Point') couponText = couponValue + '포인트 할인 쿠폰';

      // 하단 쿠폰 문구
      let couponBottom = '';
      if (couponUnit === '%') couponBottom = couponValue + '%';
      else if (couponUnit === 'Won') couponBottom = couponValue + ' won';
      else if (couponUnit === 'Point') couponBottom = couponValue + ' point';

      if (!giftlink) giftlink = "#";

      let html = template
        .replace(/\[고객명\]/g, name)
        .replace(/\[쿠폰혜택문구\]/g, couponText)
        .replace(/\[쿠폰하단\]/g, couponBottom)
        .replace(/\[쇼핑몰\]/g, brand)
        .replace(/\[giftlink\]/g, giftlink);

      lastHtml = html; // 다운로드용 저장

      document.getElementById('result').innerHTML =
        '<div class="section"><b>미리보기</b>' + html + '</div>';
    }

    function downloadHtml() {
      // 전체 HTML 문서로 감싸서 다운로드
      const doc = `
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>생일 축하 템플릿</title>
  <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i" rel="stylesheet">
  <style>
    body { font-family: 'Lora', Georgia, 'Times New Roman', serif; background:#f6f6f6; }
    .preview-container {
      background:#fff;
      border-radius:10px;
      box-shadow:0 2px 8px #eee;
      width:600px;
      margin:40px auto 0 auto;
      font-family: 'Lora', Georgia, 'Times New Roman', serif;
    }
    .es-header-row {
      display: flex;
      align-items: center;
      padding: 15px 20px 15px 20px;
    }
    .es-header-left {
      color:#CCCCCC;
      font-size:14px;
      font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
    }
    .email-title {
      font-family:Lora,Georgia,'Times New Roman',serif;
      color:#666;
      font-size:40px;
      text-align:center;
      margin:36px 0 0 0;
      font-weight:normal;
    }
    .email-img { display:block; margin:28px auto 24px auto; }
    .email-body {
      color:#999999;
      font-size:14px;
      text-align:center;
      line-height:1.7;
      margin-bottom:20px;
      font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
    }
    .email-sign {
      color:#999;
      font-size:14px;
      text-align:center;
      font-style:italic;
      margin-bottom:36px;
      font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
    }
    .email-surprise {
      background:#c4dbf2;
      padding:36px 0 36px 0;
      text-align:center;
    }
    .email-surprise-title {
      color:#2f464b;
      font-size:24px;
      margin:0 0 12px 0;
      font-weight:normal;
      font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
    }
    .email-surprise-desc {
      color:#2f464b;
      font-size:20px;
      margin:0 0 18px 0;
      font-weight:normal;
      font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
    }
    .email-btn {
      display:inline-block;
      background:#fff;
      color:#2f464b;
      padding:10px 25px;
      border-radius:5px;
      text-decoration:none;
      font-size:18px;
      border:1px solid #ddd;
      margin-bottom:10px;
      font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
    }
    .email-footer {
      text-align:center;
      padding:32px 0 0 0;
      font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
    }
    .email-brand {
      font-size:24px;
      color:#222;
      font-weight:normal;
      letter-spacing:2px;
      margin-bottom:10px;
    }
    .email-copyright {
      color:#888;
      font-size:12px;
      margin-bottom:4px;
    }
    .email-unsub {
      color:#888;
      font-size:12px;
      text-decoration:underline;
    }
    .footer-spacer {
      height: 48px;
      background: transparent;
    }
  </style>
</head>
<body>
${lastHtml}
</body>
</html>
      `.trim();

      const blob = new Blob([doc], {type: "text/html"});
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "birthday_template.html";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }

    window.onload = makeHtml;
  </script>
</body>
</html>
